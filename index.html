<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lifetime Signature Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 900px;
      margin: 0 auto;
      background:#f7f7f7;
    }
    h1 {
      font-size: 22px;
      margin-bottom: 6px;
    }
    p {
      font-size: 13px;
      margin: 4px 0;
    }
    label {
      display: block;
      font-size: 13px;
      margin-top: 8px;
    }
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="url"] {
      width: 100%;
      max-width: 420px;
      padding: 6px 8px;
      font-size: 13px;
      box-sizing: border-box;
    }
    button {
      padding: 6px 14px;
      font-size: 13px;
      cursor: pointer;
    }
    .row {
      display: flex;
      gap: 40px;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    .col {
      flex: 1 1 350px;
      min-width: 320px;
    }
    .preview {
      border: 1px solid #ccc;
      padding: 12px;
      min-height: 160px;
      display: inline-block;
      background: #ffffff;
    }
    .note {
      font-size: 11px;
      color: #666;
      margin-top: 4px;
    }
  </style>
</head>

<body>
  <h1>Lifetime Realty &amp; Investments – Email Signature Generator</h1>
  <p>Fill this out and click <strong>Generate</strong>. Then copy the preview and paste it into your Gmail or Outlook. Apple Mail is not supported.</p>

  <div class="row">
    <div class="col">
      <form id="sigForm">

        <label>
          First and Last Name (as shown)
          <input type="text" id="agentName" placeholder="Agent Name" required>
        </label>

        <label>
          Job Title
          <input type="text" id="jobTitle" placeholder="REALTOR®">
        </label>

        <label>
          DRE License Number (numbers only)
          <input type="text" id="dreNumber" placeholder="07195209">
        </label>

        <label>
          Email Address
          <input type="email" id="email" placeholder="you@lifetimerealtygroup.com" required>
        </label>

        <label>
          Cell Phone Number (digits only)
          <input type="tel" id="cell" placeholder="7145551234" required>
          <span class="note">
            Just type digits (e.g. <strong>7145551234</strong>).  
            We automatically format it to <strong>(714) 555-1234</strong> with a click-to-call link.
          </span>
        </label>

        <label>
          Website URL
          <input type="url" id="website" placeholder="www.lifetimerealtygroup.com">
        </label>

        <label>
          Headshot (Resize to 100×100)
          <input type="file" id="headshot" accept="image/*">
          <span class="note">Leave blank if you want the version without a headshot.</span>
        </label>

        <div style="margin-top:12px;">
          <button type="button" onclick="generateSignature()">Generate Signature</button>
          <button type="button" onclick="copyHtml()" style="margin-left:8px;">Copy HTML</button>
        </div>

      </form>
    </div>

    <div class="col">
      <h3>Highlight, Copy, &amp; Paste</h3>
      <div id="preview" class="preview"></div>
      <div style="margin-top:8px;">
        <button type="button" onclick="copySignature()">Copy Signature</button>
      </div>
    </div>
  </div>

  <script>
    const logoUrl = "https://inception-app-prod.s3.amazonaws.com/ODc4ODI2MmItYmViMy00MGIzLTllMWItODUxNTE0Zjk1OWY4/content/2025/10/fc7e2f52486fd012c387493d19d22ad09570bd84.png";

    let headshotDataUrl = "";
    let currentHtml = ""; // store latest signature HTML

    // Resize headshot to 100x100 center crop
    document.getElementById('headshot').addEventListener('change', function (e) {
      const file = e.target.files[0];
      if (!file) { headshotDataUrl = ""; return; }

      const reader = new FileReader();
      reader.onload = function (ev) {
        const img = new Image();
        img.onload = function () {
          const size = 100;
          const canvas = document.createElement('canvas');
          canvas.width = size;
          canvas.height = size;

          const ctx = canvas.getContext('2d');

          const minSide = Math.min(img.width, img.height);
          const sx = (img.width - minSide) / 2;
          const sy = (img.height - minSide) / 2;

          ctx.drawImage(img, sx, sy, minSide, minSide, 0, 0, size, size);

          headshotDataUrl = canvas.toDataURL('image/jpeg', 0.9);
        };
        img.src = ev.target.result;
      };
      reader.readAsDataURL(file);
    });

    function formatPhone(raw) {
      const digits = raw.replace(/\D/g, "");
      if (digits.length === 10) {
        return {
          display: `(${digits.slice(0,3)}) ${digits.slice(3,6)}-${digits.slice(6)}`,
          tel: `1${digits}`
        };
      }
      return { display: raw, tel: digits || raw };
    }

    function generateSignature() {
      const name = agentName.value.trim();
      const title = jobTitle.value.trim();
      const dre = dreNumber.value.trim();
      const email = document.getElementById('email').value.trim();
      const website = document.getElementById('website').value.trim();
      const cellInput = document.getElementById('cell').value.trim();

      if (!name || !email || !cellInput) {
        alert("Please fill in Name, Email, and Cell Phone Number.");
        return;
      }

      const { display: cellDisplay, tel: cellRaw } = formatPhone(cellInput);

      const jobLine =
        (title || dre)
          ? (title ? title.toUpperCase() : "") +
            (title && dre ? " | " : "") +
            (dre ? "DRE # " + dre : "")
          : "";

      const subject = "Quick meeting to discuss real estate goals";
      const body =
        "Hi " + name + ",\n\n" +
        "I'd like to schedule a brief meeting to discuss real estate plans and see how we may work together.\n\n" +
        "Thank you!";

const bookLink =
  "mailto:" + email +
  "?subject=" + encodeURIComponent(subject) +
  "&body=" + encodeURIComponent(body);


      let leftHTML = "";

      if (headshotDataUrl) {
        leftHTML =
          `<table cellpadding="0" cellspacing="0" border="0">
             <tr><td>
               <img src="${headshotDataUrl}" style="width:100px;height:100px;object-fit:cover;display:block;border:0;">
             </td></tr>
             <tr><td style="padding-top:6px;">
               <img src="${logoUrl}" style="width:100px;display:block;border:0;">
             </td></tr>
           </table>`;
      } else {
        leftHTML = `<img src="${logoUrl}" style="width:100px;display:block;border:0;">`;
      }

      const html =
        `<table cellpadding="0" cellspacing="0" border="0" style="font-family:Arial;color:#000;font-size:10px;">
          <tr>
            <td style="padding-right:16px;border-right:1px solid #000;" valign="middle">
              ${leftHTML}
            </td>
            <td width="16"></td>
            <td valign="middle">

              <div style="font-size:18px;font-weight:bold;margin:0 0 4px 0;">${name}</div>

              ${jobLine ? `<div style="font-size:10px;text-transform:uppercase;margin:0;">${jobLine}</div>` : ""}

              <div style="font-size:10px;text-transform:uppercase;margin:2px 0 0 0;">LIFETIME REALTY &amp; INVESTMENTS</div>

              <div style="height:8px;"></div>

              <div style="font-size:10px;letter-spacing:0.67px;margin:0;"><strong>C:</strong> <a href="tel:${cellRaw}" style="color:#000;text-decoration:none;">${cellDisplay}</a></div>
              <div style="font-size:10px;letter-spacing:0.67px;margin:0;"><strong>E:</strong> <a href="mailto:${email}" style="color:#000;text-decoration:none;">${email}</a></div>
              ${website ? `<div style="font-size:10px;letter-spacing:0.67px;margin:0;"><strong>W:</strong> <a href="https://${website.replace(/^https?:\/\//i, '')}" style="color:#000;text-decoration:none;">${website}</a></div>` : ""}

              <div style="height:8px;"></div>

              <table cellpadding="0" cellspacing="0" border="0">
                <tr>
                  <td style="background:#000;padding:4px 10px;text-align:center;">
                    <a href="${bookLink}" style="color:#fff;text-decoration:none;font-size:10px;text-transform:uppercase;">BOOK A MEETING</a>
                  </td>
                </tr>
              </table>

            </td>
          </tr>
        </table>`;

      currentHtml = html;
      document.getElementById("preview").innerHTML = html;
    }

    function copyHtml() {
      if (!currentHtml) {
        alert("Please click Generate Signature first.");
        return;
      }
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipclipboard.writeText(currentHtml)
          .then(() => alert("HTML copied to clipboard."))
          .catch(() => fallbackCopyHtml());
      } else {
        fallbackCopyHtml();
      }
    }

    function fallbackCopyHtml() {
      if (!currentHtml) {
        alert("Please click Generate Signature first.");
        return;
      }
      const tempArea = document.createElement("textarea");
      tempArea.value = currentHtml;
      document.body.appendChild(tempArea);
      tempArea.select();
      try {
        document.execCommand("copy");
        alert("HTML copied to clipboard.");
      } catch (e) {
        alert("Could not copy HTML automatically. You may need to copy from the preview manually.");
      }
      document.body.removeChild(tempArea);
    }

    function copySignature() {
      const preview = document.getElementById("preview");

      if (!preview.innerHTML.trim()) {
        alert("Please click Generate Signature first.");
        return;
      }

      // Try modern clipboard with HTML support
      if (navigator.clipboard && window.ClipboardItem) {
        const type = "text/html";
        const blob = new Blob([preview.innerHTML], { type });
        const data = [new ClipboardItem({ [type]: blob })];
        navigator.clipboard.write(data)
          .then(() => alert("Signature copied to clipboard."))
          .catch(() => fallbackCopySignature(preview));
      } else {
        fallbackCopySignature(preview);
      }
    }

    function fallbackCopySignature(preview) {
      const selection = window.getSelection();
      const range = document.createRange();
      range.selectNodeContents(preview);
      selection.removeAllRanges();
      selection.addRange(range);
      try {
        document.execCommand('copy');
        alert('Signature copied to clipboard.');
      } catch (e) {
        alert('If this did not work, please manually highlight the signature and copy it.');
      }
      selection.removeAllRanges();
    }

    window.onload = () => {
      agentName.value = "Agent Name";
      jobTitle.value = "REALTOR®";
      dreNumber.value = "07195209";
      email.value = "you@lifetimerealtygroup.com";
      cell.value = "7145551234";
      website.value = "www.lifetimerealtygroup.com";
      generateSignature();
    };
  </script>

</body>
</html>
