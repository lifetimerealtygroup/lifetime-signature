<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lifetime Signature Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 900px;
      margin: 0 auto;
      background:#f7f7f7;
    }
    h1 {
      font-size: 22px;
      margin-bottom: 6px;
    }
    p {
      font-size: 13px;
      margin: 4px 0;
    }
    label {
      display: block;
      font-size: 13px;
      margin-top: 8px;
    }
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="url"] {
      width: 100%;
      max-width: 420px;
      padding: 6px 8px;
      font-size: 13px;
      box-sizing: border-box;
    }
    button {
      padding: 6px 14px;
      font-size: 13px;
      cursor: pointer;
    }
    .row {
      display: flex;
      gap: 40px;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    .col {
      flex: 1 1 350px;
      min-width: 320px;
    }
    textarea {
      width: 100%;
      height: 260px;
      font-family: monospace;
      font-size: 11px;
      box-sizing: border-box;
      white-space: pre;
    }
    .preview {
      border: 1px solid #ccc;
      padding: 12px;
      min-height: 160px;
      display: inline-block;
      background: #ffffff;
    }
    .note {
      font-size: 11px;
      color: #666;
      margin-top: 4px;
    }
  </style>
</head>

<body>
  <h1>Lifetime Realty &amp; Investments – Email Signature Generator</h1>
  <p>Fill this out and click <strong>Generate</strong>. Then copy the HTML into Gmail, Apple Mail, Outlook, etc.</p>

  <div class="row">
    <div class="col">
      <form id="sigForm">

        <label>
          First and Last Name (as shown)
          <input type="text" id="agentName" placeholder="Agent Name" required>
        </label>

        <label>
          Job Title
          <input type="text" id="jobTitle" placeholder="REALTOR®">
        </label>

        <label>
          DRE License Number (numbers only)
          <input type="text" id="dreNumber" placeholder="07195209">
        </label>

        <label>
          Email Address
          <input type="email" id="email" placeholder="you@lifetimerealtygroup.com" required>
        </label>

        <label>
          Cell Phone Number (digits only)
          <input type="tel" id="cell" placeholder="7145551234" required>
          <span class="note">
            Just type digits (e.g. <strong>7145551234</strong>).  
            We automatically format it to <strong>(714) 555-1234</strong> with a click-to-call link.
          </span>
        </label>

        <label>
          Website URL
          <input type="url" id="website" placeholder="https://www.lifetimerealtygroup.com">
        </label>

        <label>
          Headshot (Resize to 200×200)
          <input type="file" id="headshot" accept="image/*">
          <span class="note">Leave blank if you want the version without a headshot.</span>
        </label>

        <div style="margin-top:12px;">
          <button type="button" onclick="generateSignature()">Generate Signature</button>
          <button type="button" onclick="copyHtml()" style="margin-left:8px;">Copy HTML</button>
        </div>

      </form>
    </div>

    <div class="col">
      <h3>Preview</h3>
      <div id="preview" class="preview"></div>

      <h3 style="margin-top:16px;">Signature HTML</h3>
      <textarea id="outputHtml" readonly></textarea>
    </div>
  </div>

  <script>
    const logoUrl = "https://inception-app-prod.s3.amazonaws.com/ODc4ODI2MmItYmViMy00MGIzLTllMWItODUxNTE0Zjk1OWY4/content/2025/10/fc7e2f52486fd012c387493d19d22ad09570bd84.png";

    let headshotDataUrl = "";

    document.getElementById('headshot').addEventListener('change', function (e) {
      const file = e.target.files[0];
      if (!file) { headshotDataUrl = ""; return; }

      const reader = new FileReader();
      reader.onload = function (ev) {
        const img = new Image();
        img.onload = function () {
          const canvas = document.createElement('canvas');
          const size = 200;
          canvas.width = size;
          canvas.height = size;

          const ctx = canvas.getContext('2d');

          const minSide = Math.min(img.width, img.height);
          const sx = (img.width - minSide) / 2;
          const sy = (img.height - minSide) / 2;

          ctx.drawImage(img, sx, sy, minSide, minSide, 0, 0, size, size);

          headshotDataUrl = canvas.toDataURL('image/jpeg', 0.9);
        };
        img.src = ev.target.result;
      };
      reader.readAsDataURL(file);
    });

    function formatPhone(raw) {
      const digits = raw.replace(/\D/g, "");
      if (digits.length === 10) {
        return {
          display: `(${digits.slice(0,3)}) ${digits.slice(3,6)}-${digits.slice(6)}`,
          tel: `1${digits}`
        };
      }
      return { display: raw, tel: digits };
    }

    function generateSignature() {
      const name = agentName.value.trim();
      const title = jobTitle.value.trim();
      const dre = dreNumber.value.trim();
      const email = document.getElementById('email').value.trim();
      const website = document.getElementById('website').value.trim();
      const cellInput = document.getElementById('cell').value.trim();

      const { display: cellDisplay, tel: cellRaw } = formatPhone(cellInput);

      const jobLine =
        (title || dre)
          ? (title ? title.toUpperCase() : "") +
            (title && dre ? " | " : "") +
            (dre ? "DRE # " + dre : "")
          : "";

      const subject = "Quick meeting to discuss real estate goals";
      const body =
        "Hi " + name + ",\n\n" +
        "I'd like to schedule a brief meeting to discuss real estate plans and see how we may work together.\n\n" +
        "Thank you,\n[Your Name]";

      const bookLink =
        "mailto:" + encodeURIComponent(email) +
        "?subject=" + encodeURIComponent(subject) +
        "&body=" + encodeURIComponent(body);

      let leftHTML = "";

      if (headshotDataUrl) {
        leftHTML =
          `<table><tr><td><img src="${headshotDataUrl}" style="width:200px;height:200px;object-fit:cover;display:block;"></td></tr>
           <tr><td><img src="${logoUrl}" style="width:200px;display:block;margin-top:6px;"></td></tr></table>`;
      } else {
        leftHTML = `<img src="${logoUrl}" style="width:200px;display:block;">`;
      }

      const html =
        `<table cellpadding="0" cellspacing="0" border="0" style="font-family:Arial;color:#000;font-size:6px;">
          <tr>
            <td style="padding-right:16px;border-right:1px solid #000;" valign="middle">
              ${leftHTML}
            </td>
            <td width="16"></td>
            <td valign="middle">

              <div style="font-size:15px;font-weight:bold;margin:0 0 4px 0;">${name}</div>

              ${jobLine ? `<div style="font-size:6px;text-transform:uppercase;">${jobLine}</div>` : ""}

              <div style="font-size:6px;text-transform:uppercase;margin-top:2px;">LIFETIME REALTY &amp; INVESTMENTS</div>

              <div style="height:8px;"></div>

              <div style="font-size:6px;letter-spacing:0.67px;"><strong>C:</strong> <a href="tel:${cellRaw}" style="color:#000;text-decoration:none;">${cellDisplay}</a></div>
              <div style="font-size:6px;letter-spacing:0.67px;"><strong>E:</strong> <a href="mailto:${email}" style="color:#000;text-decoration:none;">${email}</a></div>
              ${website ? `<div style="font-size:6px;letter-spacing:0.67px;"><strong>W:</strong> <a href="${website}" style="color:#000;text-decoration:none;">${website}</a></div>` : ""}

              <div style="height:8px;"></div>

              <table><tr><td style="background:#000;padding:4px 10px;">
                <a href="${bookLink}" style="color:#fff;text-decoration:none;font-size:7px;text-transform:uppercase;">BOOK A MEETING</a>
              </td></tr></table>

            </td>
          </tr>
        </table>`;

      document.getElementById("preview").innerHTML = html;
      document.getElementById("outputHtml").value = html;
    }

    function copyHtml() {
      const ta = document.getElementById("outputHtml");
      ta.select();
      document.execCommand("copy");
      alert("HTML copied!");
    }

    window.onload = () => {
      agentName.value = "Agent Name";
      jobTitle.value = "REALTOR®";
      dreNumber.value = "07195209";
      email.value = "you@lifetimerealtygroup.com";
      cell.value = "7145551234";
      website.value = "https://www.lifetimerealtygroup.com";
      generateSignature();
    };
  </script>

</body>
</html>

